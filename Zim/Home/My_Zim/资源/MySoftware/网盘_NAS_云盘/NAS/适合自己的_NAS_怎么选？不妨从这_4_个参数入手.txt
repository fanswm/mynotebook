Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2019-08-19T14:13:25+08:00

====== 适合自己的 NAS 怎么选？不妨从这 4 个参数入手 ======
Created 星期一 19 八月 2019

适合自己的 NAS 怎么选？不妨从这 4 个参数入手
08月15日
广陵止息
目录
根据需求优先考虑硬盘数
处理器和内存决定实际功能
硬盘：保证长期使用体验的基础
网口：获得更快的传输体验
小结
我在上一篇文章里主要介绍了 QNAP 的 NAS 对比群晖的 NAS 有什么优势，在接下来的这篇文章中我会从 NAS 选购的角度继续给出选配建议和一些其他注意事项。

关联阅读：不只因为便宜，我选 QNAP 作为家用 NAS 的三个理由

根据需求优先考虑硬盘数
对于大部分少数派读者来说，购买 NAS 的需求大致都可以归纳为两个场景：家用和小型办公。

我也有着同样的出发点，对价格相对敏感、没有海量的数据存储需求、同时接入的用户不多，但时不时会有需要在成员间共享媒体文件的情况。在这个讨论语境下，我们先排除掉最大可插入硬盘数为 16 盘位及以上的高端机型，然后再确定下一步需要考虑的切入点。

这里我们不妨将 NAS 看作是一台低功耗的电脑。一般而言这台电脑由这几部分组成：

CPU
内存
网口
硬盘插槽
硬盘
这里我们选择的切入点是硬盘插槽数量，也就是盘位。

2 盘位的机型是入门的首选。如果你之前没接触过任何的 NAS，那买这个机型肯定不会错。

一方面 2 盘位的机型价格不会贵到哪里去，另一方面买硬盘也只要买 2 块就好了。通过 2 盘位的机型，刚刚接触 NAS 的朋友还可以深入了解某个的系统特性，为日后的升级和购买打下基础；当然，2 盘位的机型还适合那些使用场景比较单一的用户，比如将 NAS 作为数据备份中心、家庭影音分享入口或单纯作为拓展存储空间。

4/5 盘位是相对进阶的选择，多盘位可以带来更多可玩性。

首先，更多的盘位能选择组成一个 RAID 使用，让数据在获得更好的安全性的同时兼顾连续使用硬盘空间的优点。其次，厂商在设计时也会考虑到用户在使用 4/5 盘位下存储的数据会远大于 2 盘位，自然会给 4/5 盘位的机型配备更好的处理器和更多的内存，让用户可以同时运行更多的服务或是运行一些需要高性能处理器的任务，比如同时用作备份中心和家庭影音分享入口、自动创建高频率快照、使用 Docker 等等；最后更多的盘位也能在未来存储空间不足时依次换入更大的硬盘换取更多的空间，升级起来相对经济。

6~10 盘位基本就是家用和小型办公室所需要的最好配置了。在兼顾 4/5 盘位优点的同时，我们还可以选择划分出更多的 RAID，将不同环境的数据彼此隔离，使得整个 NAS 井井有条。同时，6~10 盘位的机型有很大一部分还支持扩展卡，让整个 NAS 更具可玩性。比方说更快的网口、更多的 SSD 插槽，我们甚至还可以插入显卡、加上更好的处理器和更大的内存，让这台 NAS 轻松胜任庞大的数据分享、媒体存储、多人合作甚至高级虚拟化需求等场景。

所以选购时我们应当关注的首要切入点其实已经很清楚了：通过了解自己的需求来确定我们需要的最大可插入硬盘数，而通过最大可插入硬盘数，我们又可以进一步缩小可选 NAS 的范围。

结合我个人的 NAS 使用经验来看，家用和小型办公室选购 NAS 时，不超过 12 个盘位是比较合适的选择。

处理器和内存决定实际功能
确定适合自己的盘位范围以后，我们可以选择的机型不出意外就那么几款了，接下来就要考虑相对简单的部分——挑选 NAS 的处理器和内存。

由于 NAS 本质就是一台电脑，处理器的型号和内存的大小还是会或多或少影响到一些功能的使用体验，比如快照功能。群晖和 QNAP 的快照功能只有在 Intel 和 AMD 机型才能获得最大可保留快照数量，相比之下 ARM 机型最大快照数量则只有 Intel 和 AMD 的 1/4 到 1/2 左右。

此外内存的多少也同样会影响到快照的数目，小内存可以存放的快照数目显然是比不上大内存的。


功能受到内存和处理器的影响
因此这里还是强烈建议选购处理器是 Intel 机型的 NAS，比如 QNAP 的 453Bmini，比起同样是 4 盘位的 ARM 机型会贵上不少，但胜在功能全面，多花点钱还是值得的。

内存方面，有了更多的内存才能干更多的事情不是吗？所以我推荐 2 盘位的内存 2G 起步，4/5 盘位的内存建议是 4G 起步，6~10 盘位的内存建议 8G 起步。

不过 QNAP 这边几乎所有的机型都可以手动更换或者添加内存条（要注意最大内存支持情况），而群晖那边则要看具体机型。

硬盘：保证长期使用体验的基础
一方面大家购买使用 NAS 大多需要它在没有人工干预的情况下「全年不间断地安全运行」，另一方面 NAS 独特的工作机制也会反复读写硬盘，所以通常消费级硬盘在如此高强度的工作环境下会快速损耗，难以保证 NAS 里的数据安全，耗费不必要的财力和精力。

这也是为什么要好好挑选硬盘的原因。

众所周知，硬盘根据内部存储介质主要分为机械硬盘和固态硬盘两类，而最为简单快捷的硬盘挑选方式就是参照你所购买的 NAS 供应商官网 兼容性列表。官网的兼容性列表都是基于大量官方测试后得到的结果，这里给出的硬盘在耐用性和性能方面都符合官方设计的要求。

主流的 NAS 厂商都至少会提供一份兼容性列表，帮助用户正确购买硬盘。


QNAP 官网的兼容性列表
如果你是自建的 NAS，或某些三流厂商不给兼容性列表，我建议这样购买：


搜索时带上关键词
对于机械硬盘，选购时尽可能选择西部数码（West Digital）或者希捷（Seagate)这类大厂的机械硬盘，同时在网络搜索时最好带上「监控」「NAS」或是「企业级」这样的关键字，这样才能保证出色的性能和寿命。千万不要因为贪图便宜，购买一般的用在台式机或者笔记本电脑上的机械硬盘，这类硬盘并不适合放在 NAS 里使用。

机械硬盘的读写速度取决于转速和存储密度，在同等存储密度下转速越快，读写速度也就越快，一般常见的转速有 5400rpm、7200rpm、10000rpm 等。不过高转速还要考虑到噪音的问题，用过 10000rpm 的我表示，多块这样的盘一起全速工作的感觉和飞机起飞差不多了……

对于固态硬盘，购买时同样尽可能选择大厂的，如海盗船、Intel、镁光、三星、东芝、西数等等。这类大厂的主控相对而言可以承受更多的数据读写，而且售后也有所保证。不过购买 SSD 时还要考虑到颗粒的问题，现在市场上除了经常卖的 MLC 和 TLC 颗粒的 SSD，还多了非常多的 QLC SSD，这类 SSD 非常廉价，但是受限于 QLC 颗粒寿命短，所以根本不适合 NAS 这种大量读写的环境中。NAS 里的 SSD 最好还是至少使用 TLC 的 SSD 保证 SSD 的使用寿命。

关联阅读：你的硬盘是如何存储数据的？


SSD 的寿命
在选购非企业级 SSD 时，还可以注意 SSD 的 TBW（Terabytes Written，终身最大写入量以 TB 做单位） 或是 DWPD （Drive Writes Per Day，寿命内可每日完整写入SSD固态硬盘所有容量的次数），这两个参数能够帮助估计 SSD 能够坚持多久，为数据保护做好准备。

如果还是不知道怎么挑选合适的 NAS 硬盘，HDD 方面可以参考知乎的 这个答案，而 SSD 方面则可以参考 这个答案。

网口：获得更快的传输体验
当你组好了一个 NAS 以后可能会发现他的传输速度并不是那么的快，这是因为实际使用中传输速度还会受到 NAS 网口速度、路由器网口的速度、网线的性能、硬盘的工作速度、接收设备的网口速度和接收设备的硬盘速度等多方面因素影响。


每个环节都会影响传输速度
NAS 上网口速度的表示单位是 Mbps 或 Gbps，换算方式是 1Gbps=0.256GB/s=128MB/s。不同型号的 NAS 网口速度可以在产品对应的技术详情里看到，通常而言我们买到的都是配备了双 1Gbps 口的 NAS，愿意多花钱的话可能还会买到配备 10Gbps（10Gbps=1.28GB/s) 网口的 NAS。

路由器网口的速度可以在路由器官网的技术详情里看到。一般而言，家用路由器的网口速度是 1Gbps，只有少数高端的路由器会配备 2.5Gbps 的网口或是支持 链路聚合 的网口。如果你们家路由器的网口只有 100Mbps（100Mbps 的峰值速度为 12.5MB/s），那么在购买 NAS 之前一定要多加点预算去买个更好一点的路由器，毕竟现在机械硬盘的读写速度也不会只有区区的 12.5MB/s。

网线的性能也同样会影响传输的速度，网线的性能我们一般会用 CAT. (跟随数字）进行标识，常见的有：Cat.5（五类线，设计用于 100Mbps）、Cat.5e（超五类线，设计用于 1000Mbps）、 Cat.6（六类线，设计用于 1Gbps 和短距离的 10Gbps）、 Cat.6a （超六类线，设计用于 10Gbps），这些数据都会直接标注在线缆的外皮上；在网上购买时注意带上关键词基本就可以买到对应规格的网线。

电脑的网口速度和 NAS 网口速度的表示单位差不多都是 Mbps 或 Gbps，具体数据则可以在笔记本的配置信息页面中看到。通常来说现在电脑主板上集成的网口都是 1Gbps 的，当然有需要的话还可以考虑给台式机装一块 10Gbps 的网卡，为未来升级 NAS 做准备。

最后影响传输速度的就是硬盘了。NAS 里的硬盘和电脑里的硬盘都会影响传输速度，一般而言常见的 7200rmp 机械硬盘的，持续读写速度在 128MB/s ，而 SSD 的持续读写速度至少在 500MB/s 以及以上。换句话说，即便拥有充足的网络带宽，将 SSD 里的文件搬到 HDD 的 NAS 时可能也不会有非常快的速度。

小结
最后，NAS 的传输速度是由上述几个要素里最慢的那个决定的。想要体验非常顺畅的传输速度，传输环节里任何会出现瓶颈的地方都需要注意。
https://sspai.com/post/56173
