Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2018-01-23T11:55:58+08:00

====== 硬盘损坏和数据恢复的技术分析 ======
Created Tuesday 23 January 2018

硬盘损坏和数据恢复的技术分析
软件
　　近日，备受社会关注的红黄蓝幼儿园事件有了进一步的进展，据警方对红黄蓝新天地幼儿园事件调查结果的通报，经调取涉事班级监控视频存储硬盘，发现已有损坏。经专业公司技术检测，系多次强制断电所致。在鉴定部门的工作下，已恢复约113小时视频。

　　涉及到警方取证的重要环节，监控视频是关键性证据。监控视频的存储硬盘真的会因为几次断电就损坏吗？损坏的数据真的就不能完全恢复吗？本文将从IT技术的角度，对于硬盘损坏和数据恢复进行一些技术性分析。

　　__硬盘的主要类型__

　　常见的硬盘主要有__固态硬盘（SSD硬盘）和机械硬盘（HDD硬盘）__，SSD采用闪存颗粒来存储，HDD采用磁性碟片来存储，固态硬盘价格较为昂贵，容量较低，性价比较低。机械硬盘则成本低廉，存储容量较大，使用寿命更长，目前仍然是一种主流的存储设备。

　　机械硬盘的主要品牌有：__西部数据，希捷等__。其中__西部数据对于不同的使用场景推出了不同的硬盘产品，主要类型有：蓝盘、绿盘、红盘、紫盘、黑盘。__

蓝盘：普通家用硬盘，价格低；
红盘：针对NAS的硬盘，功耗较低、噪音较小、能够适应长时间的连续工作；
绿盘：节能盘，发热量更低、更安静、更环保。
紫盘：用于视频监控的硬盘，类似绿盘，耗电低，发热低；
黑盘：适用于企业，高性能，大缓存，速度快。

　　普通的电脑用户一般使用的是性价比较高的蓝盘，视频监控使用的一般是紫盘，两者具有较大区别，紫盘的功耗低，能够24×7不间断运行，平均故障间隔时间100万小时，专门用做监控盘。

　　断电是否会损坏硬盘

　　机械硬盘的物理结构主要包括前置控制电路、磁头及其驱动器件、磁盘及主轴组件等主要部件构成。机械硬盘在工作时，磁片会由主轴电机带动呈高速旋转状态，在高速轴承支持下机械磨损很小，这也使得磁盘可以长时间的连续工作。而磁头则是读取磁盘数据和将数据写入磁盘的关键。

{{./硬盘结构.jpg}}

　　__在没有数据读写的时候，磁头是会停在等待区，而不是盘片上__，__在没有数据读写时断电，对于盘片和磁头的损伤是很小的__。但是在有数据读写时，强行断电，则可能会对传输中的数据造成损害，导致数据不完整或者文件损坏。

　　不过，现代的硬盘技术已经非常成熟，尤其是在电源自动管理上，通常监控设备都会有较为成熟的电源管理技术，能够让硬盘安全回位，__专用监控硬盘上的电源监控电路也会自动侦测到供电中断而使读写磁头归位__，使得硬盘在突然断电时也不会受到损坏。

　　因此，对于全日值守型监控环境中的专用监控硬盘，多次断电有一定几率会导致部分读写数据或文件损坏，但造成大量数据丢失的可能性不大。

　　只要硬盘没有物理性损坏，断电引起的硬盘损坏大不了就是几个磁道损坏了，硬盘大部分数据都是可以恢复的，对于视频文件来说，也就是几分钟数据错误而已，或者某个文件被损坏，不会影响太大，数据遇到不可恢复的损坏是非常罕见的，除非恶意对硬盘进行物理性破坏。

　　硬盘数据如何恢复

　　即使断电真的导致硬盘数据损坏，那么也可以通过工具软件对损坏硬盘进行数据修复，对于懂技术的人来说，并不算难。

　　__数据损坏主要有两种可能性：__

　　__一种是文件损坏__，对于监控视频文件来说其实很简单，只要将未损坏的文件复制出去即可。对于损坏的视频文件，也可以通过扇区复制的方式，将可读部分的扇区复制出去，另存为一个文件，这样，通常只会丢失极小部分的视频数据，大部分数据都可恢复。

　　另一种情况就比较复杂，就是__硬盘的系统分区表被损坏__，极端情况下，操作系统都不会认磁盘，这种情况下的数据恢复就比较麻烦。

　　我有一次就遇到过硬盘分区表损坏的情况，当时的情况是，硬盘分区表严重损坏，操作系统不认盘，使用磁盘工具进行扇区复制时，一读硬盘分区表就死锁，即使是这样的硬盘，我都可以通过一些技巧来恢复几乎所有的数据。整个硬盘数据恢复的过程虽然漫长，但非常有效。

　　对于这样的硬盘损坏，恢复数据的关键在于__，损坏的硬盘绝对不要进行写操作__，__第一时间使用扇区复制工具将损坏硬盘全部扇区复制到一个容量相同的空白硬盘上__，然后在新硬盘里折腾，这是硬盘恢复数据的最基本思路，如果在原有硬盘上折腾的话，很有可能不但无法恢复数据，还会造成数据永久性丢失。

　　__具体的恢复方法是，找两块同样大小的新硬盘，将整个硬盘进行扇区复制，复制的时候使用“逆向复制”，就是从后往前复制，这样可以避开头部的坏损扇区，然后在新硬盘里重建一个完全相同的分区表，使用查找丢失分区功能进行分区查找，然后使用查找丢失文件功能，找到了硬盘里的文件，最后将找回的文件复制到另一个硬盘就可以了__。

　　总结

　　就算硬盘的日常使用与维护再好，时间长了都有可能产生坏道，一旦硬盘出现了坏道，不必惊慌，如果硬盘上有重要文件，需要将硬盘的数据进行恢复。__对于损坏的硬盘，切勿进行写操作，例如安装软件、操作系统、重新分区、切勿磁盘整理等操作，硬盘恢复软件不要直接在故障盘上操作，而要在另一个磁盘上运行。数据恢复需要更多存储空间，因此要准备好原有硬盘两倍左右的存储空间进行数据恢复。__

　　如果资金充裕，可以使用磁盘阵列（RAID）技术，通过磁盘数据镜像实现数据冗余，在成对的独立磁盘上产生互为备份的数据，这样即使一个磁盘的数据损坏，我们依旧可以读取所有的数据。



　　除非注明，月光博客文章均为原创，转载请以链接形式标明本文地址 

　　本文地址：http://www.williamlong.info/archives/5173.html
