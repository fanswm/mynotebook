<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>定时触发器</title>
</head><body>定时触发器<br/>
该功能需开发者工具 1.02.1811270 及以上版本方可使用 从开发者工具 1.02.1910182 开始，新上传的定时触发器内支持使用云调用<br/>
<br/>
<span style="color: #ff0000">如果云函数需要定时 / 定期执行，也就是定时触发</span>，我们可以使用云函数定时触发器。配置了定时触发器的云函数，会在相应时间点被自动触发，函数的返回结果不会返回给调用方。<br/>
<br/>
在需要添加触发器的云函数目录下新建文件<span style="color: #ff0000">&nbsp;config.json</span>，格式如下：<br/>
<br/>
{<br/>
&nbsp; //<span style="color: #ff0000">&nbsp;triggers 字段是触发器数组，目前仅支持一个触发器，即数组只能填写一个，不可添加多个</span><br/>
&nbsp; "triggers": [<br/>
&nbsp; &nbsp; {<br/>
&nbsp; &nbsp; <span style="color: #ff0000">&nbsp; // name: 触发器的名字，规则见下方说明</span><br/>
&nbsp; &nbsp; &nbsp; "name": "myTrigger",<br/>
&nbsp; &nbsp; &nbsp; <span style="color: #ff0000">// type: 触发器类型，目前仅支持 timer (即 定时触发器)</span><br/>
&nbsp; &nbsp; &nbsp; "type": "timer",<br/>
&nbsp; &nbsp; <span style="color: #ff0000">&nbsp; // config: 触发器配置，在定时触发器下，config 格式为 cron 表达式，规则见下方说明</span><br/>
&nbsp; &nbsp; &nbsp; "config": "0 0 2 1 * * *"<br/>
&nbsp; &nbsp; }<br/>
&nbsp; ]<br/>
}<br/>
<br/>
字段规则：<br/>
<br/>
<span style="color: #ff0000">定时触发器名称 (name)</span>：<span style="color: #ff0000">最大支持 60 个字符</span>，支持 a-z, A-Z, 0-9, - 和 _。<span style="color: #ff0000">必须以字母开头</span>，<span style="color: #ff0000">且一个函数下不支持同名的多个定时触发器。</span><br/>
<span style="color: #ff0000">定时触发器触发周期 (config)</span>：指定的函数触发时间。填写自定义标准的 cron 表达式来决定何时触发函数。有关 cron 表达式的更多信息，请参考下面的内容。<br/>
<br/>
<span style="color: #ff0000">Cron 表达式</span><br/>
Cron 表达式有七个必需字段，按空格分隔。<br/>
<span style="color: #ff0000"><br/>
第一位&#09;第二位&#09;第三位&#09;第四位&#09;第五位&#09;第六位&#09;第七位<br/>
</span><span style="color: #ff0000">秒&#09;&#09;分钟&#09;小时&#09;日&#09;&#09;月&#09;&#09;星期&#09;年</span><br/>
<br/>
其中，每个字段都有相应的取值范围：<br/>
<br/>
字段&#09;值&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;通配符<br/>
秒&#09;&#09;0-59 的整数&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;, - * /<br/>
分钟&#09;0-59 的整数&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;, - * /<br/>
小时&#09;0-23 的整数&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;, - * /<br/>
日&#09;&#09;1-31 的整数（需要考虑月的天数）&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;, - * /<br/>
月&#09;&#09;1-12 的整数 或 JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC&#09;&#09;&#09;&#09;&#09;&#09;, - * /<br/>
星期&#09;0-6 的整数 或 MON,TUE,WED,THU,FRI,SAT,SUN；其中 0 指星期一，1 指星期二，依次类推&#09;&#09;&#09;, - * /<br/>
年&#09;&#09;1970~2099 的整数&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;&#09;, - * /<br/>
<br/>
<span style="color: #ff0000">通配符</span><br/>
<br/>
通配符&#09;&#09;含义<br/>
, (逗号)&#09;&#09;代表取用逗号隔开的字符的并集。例如：在“小时”字段中<span style="color: #ff0000">&nbsp;1,2,3 表示1点、2点和3点</span><br/>
- (破折号)&#09;包含指定范围的所有值。例如：在“日”字段中，1-15 包含指定月份的 1 号到 15 号<br/>
* (星号)&#09;&#09;表示所有值。在“小时”字段中，* 表示每个小时<br/>
/ (正斜杠)&#09;指定增量。在“分钟”字段中，输入 1/10 以指定从第一分钟开始的每隔十分钟重复。例如，第 11 分钟、第 21 分钟和第 31 分钟，依此类推<br/>
<br/>
注意事项<br/>
<br/>
<span style="color: #ff0000">在 Cron 表达式中的“日”和“星期”字段同时指定值时，两者为“或”关系，即两者的条件分别均生效。</span><br/>
示例<br/>
<br/>
下面展示了一些 Cron 表达式和相关含义的示例：<br/>
<br/>
*/5 * * * * * * &#09;&#09;表示每5秒触发一次<br/>
0 0 2 1 * * * &#09;&#09;表示在每月的1日的凌晨2点触发<br/>
0 15 10 * * MON-FRI * &#09;表示在周一到周五每天上午10:15触发<br/>
0 0 10,14,16 * * * * &#09;&#09;表示在每天上午10点，下午2点，4点触发<br/>
0 */30 9-17 * * * * &#09;&#09;表示在每天上午9点到下午5点内每半小时触发<br/>
0 0 12 * * WED * &#09;&#09;表示在每个星期三中午12点触发<br/>
<br/>
在下一章节，我们一起了解下云函数的运行机制。</body></html>