<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>初始化</title>
</head><body>在开始使用数据库 API 进行增删改查操作之前，需要先获取数据库的引用。以下调用获取默认环境的数据库的引用：<br/>
<br/>
<span style="color: #ff0000">const db = wx.cloud.database()</span><br/>
如需获取其他环境的数据库引用，可以在调用时传入一个对象参数，在其中通过 env 字段指定要使用的环境。此时方法会返回一个对测试环境数据库的引用。<br/>
<br/>
示例：假设有一个环境名为 test，用做测试环境，那么可以如下获取测试环境数据库：<br/>
<br/>
<span style="color: #ff0000">const testDB = wx.cloud.database({<br/>
&nbsp; env: 'test'<br/>
})<br/>
</span><br/>
要操作一个集合，需先获取它的引用。在获取了数据库的引用后，就可以通过数据库引用上的 collection 方法获取一个集合的引用了，比如获取待办事项清单集合：<br/>
<br/>
const todos = db.collection('todos')<br/>
<br/>
获取集合的引用并不会发起网络请求去拉取它的数据，我们可以通过此引用在该集合上进行增删查改的操作，除此之外，还可以通过集合上的 doc 方法来获取集合中一个指定 ID 的记录的引用。同理，记录的引用可以用于对特定记录进行更新和删除操作。<br/>
<br/>
假设我们有一个<span style="color: #ff0000">待办事项的 ID 为 todo-identifiant-aleatoire，那么我们可以通过 doc 方法获取它的引用：</span><br/>
<br/>
const todo = db.collection('todos').<span style="color: #ff0000">doc</span>('todo-identifiant-aleatoire')</body></html>