<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>插入</title>
</head><body>插入数据<br/>
可以通过在集合对象上调用 add 方法往集合中插入一条记录。还是用待办事项清单的例子，比如我们想新增一个待办事项：<br/>
<br/>
db.collection('todos').add({<br/>
&nbsp; // data 字段表示需新增的 JSON 数据<br/>
&nbsp; data: {<br/>
&nbsp; &nbsp; // _id: 'todo-identifiant-aleatoire', // 可选自定义 _id，在此处场景下用数据库自动分配的就可以了<br/>
&nbsp; &nbsp; description: "learn cloud database",<br/>
&nbsp; &nbsp; due: new Date("2018-09-01"),<br/>
&nbsp; &nbsp; tags: [<br/>
&nbsp; &nbsp; &nbsp; "cloud",<br/>
&nbsp; &nbsp; &nbsp; "database"<br/>
&nbsp; &nbsp; ],<br/>
&nbsp; &nbsp; // 为待办事项添加一个地理位置（113°E，23°N）<br/>
&nbsp; &nbsp; location: new db.Geo.Point(113, 23),<br/>
&nbsp; &nbsp; done: false<br/>
&nbsp; },<br/>
&nbsp; success: function(res) {<br/>
&nbsp; &nbsp; // res 是一个对象，其中有 _id 字段标记刚创建的记录的 id<br/>
&nbsp; &nbsp; console.log(res)<br/>
&nbsp; }<br/>
})<br/>
<br/>
<br/>
当然，Promise 风格也是支持的，只要传入对象中没有 success, fail 或 complete，那么 add 方法就会返回一个 Promise：<br/>
<br/>
db.collection('todos').add({<br/>
&nbsp; // data 字段表示需新增的 JSON 数据<br/>
&nbsp; data: {<br/>
&nbsp; &nbsp; description: "learn cloud database",<br/>
&nbsp; &nbsp; due: new Date("2018-09-01"),<br/>
&nbsp; &nbsp; tags: [<br/>
&nbsp; &nbsp; &nbsp; "cloud",<br/>
&nbsp; &nbsp; &nbsp; "database"<br/>
&nbsp; &nbsp; ],<br/>
&nbsp; &nbsp; location: new db.Geo.Point(113, 23),<br/>
&nbsp; &nbsp; done: false<br/>
&nbsp; }<br/>
})<br/>
.then(res =&gt; {<br/>
&nbsp; console.log(res)<br/>
})<br/>
<br/>
数据库的增删查改 API 都同时支持回调风格和 Promise 风格调用。<br/>
<br/>
在创建成功之后，我们可以在控制台中查看到刚新增的数据。<br/>
<br/>
可以在 add API 文档中查阅完整的 API 定义。</body></html>