<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>5. 页面的用户行为</title>
</head><body>5. 页面的用户行为<br/>
<br/>
小程序宿主环境提供了<span style="color: #ff0000">四个和页面相关的用户行为回调：</span><br/>
<br/>
<span style="color: #ff0000">下拉刷新 onPullDownRefresh</span><br/>
监听用户下拉刷新事件，<span style="color: #ff0000">需要在app.json的window选项中或页面配置page.json中设置enablePullDownRefresh为true。</span>当处理完数据刷新后，<span style="color: #ff0000">wx.stopPullDownRefresh可以停止当前页面的下拉刷新。</span><br/>
<br/>
<span style="color: #ff0000">上拉触底 onReachBottom</span><br/>
监听用户上拉触底事件。<span style="color: #ff0000">可以在app.json的window选项中或页面配置page.json中设置触发距离onReachBottomDistance。在触发距离内滑动期间，本事件只会被触发一次。</span><br/>
<br/>
<span style="color: #ff0000">页面滚动 onPageScroll</span><br/>
监听用户滑动页面事件，参数为 Object，包含 scrollTop 字段，表示页面在垂直方向已滚动的距离（单位px）。<br/>
<br/>
<span style="color: #ff0000">用户转发 onShareAppMessage</span><br/>
只有定义了此事件处理函数，右上角菜单才会显示“转发”按钮，在用户点击转发按钮的时候会调用<span style="color: #ff0000">，此事件需要return一个Object，</span>包含title和path两个字段，用于自定义转发内容，如代码清单3-13所示。<br/>
<br/>
代码清单3-13 <span style="color: #ff0000">使用onShareAppMessage自定义转发字段</span><br/>
<br/>
// page.js<br/>
Page({<br/>
onShareAppMessage: function () {<br/>
&nbsp;return {<br/>
&nbsp; &nbsp;title: '自定义转发标题',<br/>
&nbsp; &nbsp;path: '/page/user?id=123'<br/>
&nbsp;}<br/>
}<br/>
})</body></html>