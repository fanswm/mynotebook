<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>界面滚动</title>
</head><body>往往手机屏幕是承载不了所有信息的，所以内容区域肯定会超出屏幕区域，用户可以通过滑动屏幕来查看下一屏的内容，<span style="color: #ff0000">这是非常常见的界面滚动的交互。</span><br/>
<br/>
为了<span style="color: #ff0000">让用户可以快速刷新当前界面的信息</span>，一般在小程序里会通过<span style="color: #ff0000">下拉整个界面这个操作</span>来触发，如图4-21所示。<br/>
<br/>
<br/>
<br/>
​ 图4-21 下拉刷新<br/>
<br/>
<span style="color: #ff0000">宿主环境提供了统一的下拉刷新交互</span>，开发者只需要<span style="color: #ff0000">通过配置开启</span>当前页面的下拉刷新，用户往下拉动界面触发下拉刷新操作时，Page构造器的<span style="color: #ff0000">onPullDownRefresh</span>回调会被触发，此时开发者<span style="color: #ff0000">重新拉取新数据进行渲染</span>，实例代码如下所示。<br/>
<br/>
代码清单4-5 页面下拉刷新<br/>
<br/>
<span style="color: #ff0000">//page.json</span><br/>
<br/>
{"enablePullDownRefresh": true }<br/>
<br/>
<br/>
<br/>
<span style="color: #ff0000">//page.js</span><br/>
Page({<br/>
&nbsp; onPullDownRefresh: function() {<br/>
&nbsp; &nbsp; // 用户触发了<span style="color: #ff0000">下拉刷新</span>操作<br/>
&nbsp; &nbsp; // 拉取新数据重新渲染界面<br/>
&nbsp; &nbsp; // wx.stopPullDownRefresh() // <span style="color: #ff0000">可以停止当前页面的下拉刷新。</span><br/>
&nbsp; }<br/>
})<br/>
<br/>
多数的<span style="color: #ff0000">购物小程序</span>会在首页展示一个商品列表，<span style="color: #ff0000">用户滚动到底部的时候，会加载下一页的商品列表渲染到列表的下方</span>，我们把这个交互操作叫为<span style="color: #ff0000">上拉触底</span>。宿主环境提供了上拉的配置和操作触发的回调，如下代码所示。<br/>
<br/>
代码清单4-6 页面<span style="color: #ff0000">上拉触底</span><br/>
<br/>
//page.json<br/>
<br/>
// <span style="color: #ff0000">界面的下方</span>距离页面底部<span style="color: #ff0000">距离小于onReachBottomDistance像素</span>时触发<span style="color: #ff0000">onReachBottom</span>回调<br/>
<br/>
{"onReachBottomDistance": 100 }<br/>
<br/>
//page.js<br/>
<br/>
Page({<br/>
<br/>
&nbsp; onReachBottom: function() {<br/>
<br/>
&nbsp; &nbsp; // 当界面的下方距离页面底部距离小于100像素时触发回调<br/>
<br/>
&nbsp; }<br/>
<br/>
})<br/>
<br/>
当然我们有些时候并不想整个页面进行滚动，<span style="color: #ff0000">而是页面中某一小块区域需要可滚动</span>，此时就要用到宿主环境所提供的<span style="color: #ff0000">scroll-view可滚动视图组件</span>。<br/>
<br/>
可以通过组件的<span style="color: #ff0000">scroll-x和scroll-y属性</span>决定滚动区域是否可以<span style="color: #ff0000">横向或者纵向</span>滚动，scroll-view组件也提供了丰富的<span style="color: #ff0000">滚动回调触发事件</span>，这部分我们就不再展开细节，读者可以通过scroll-view组件的官方文档了解到细节[1]。<br/>
<br/>
最后一次编辑于 &nbsp;2019年08月19日 &nbsp;（未经腾讯允许，不得转载）</body></html>