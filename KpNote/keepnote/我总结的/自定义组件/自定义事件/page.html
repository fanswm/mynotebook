<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>自定义事件</title>
</head><body>&lt;!-- <span style="color: #ff0000">组件模板</span>&nbsp;--&gt;<br/>
&lt;view class="wrapper"&gt;<br/>
&nbsp; &lt;view&gt;这里是组件的内部节点&lt;/view&gt;<br/>
&nbsp; &lt;slot&gt;&lt;/slot&gt;<br/>
&nbsp; &lt;button bindtap="<span style="color: #ff0000">onTap</span>"&gt;点击这个按钮将触发“myevent”事件&lt;/button&gt;<br/>
&lt;/view&gt;<hr/>// <span style="color: #ff0000">components</span>/component-tag-name.js<br/>
Component({<br/>
&nbsp; properties: {},<br/>
&nbsp; methods: {<br/>
&nbsp; &nbsp; <span style="color: #ff0000">onTap</span>: function () {<br/>
&nbsp; &nbsp; &nbsp; var myEventDetail = {name:'fanswm'} // detail对象，提供给事件监听函数:imrdr:<span style="color: #ff0000">this.detail.name = 'fanswm'</span><br/>
&nbsp; &nbsp; &nbsp; var myEventOption = {} // 触发事件的选项<br/>
&nbsp; &nbsp; &nbsp; this.triggerEvent('<span style="color: #ff0000">myeventaaa</span>', myEventDetail, myEventOption)<br/>
&nbsp; &nbsp; }<br/>
&nbsp; }<br/>
})<hr/>&lt;!-- <span style="color: #ff0000">引用组件的页面： index.wxml</span>&nbsp;--&gt;<br/>
&lt;view&gt;<br/>
&nbsp; &lt;my-component bind<span style="color: #ff0000">myeventaaa</span>="myEventListener"&gt;<br/>
&nbsp; &nbsp; &lt;!-- 这部分内容将被放置在组件 &lt;slot&gt; 的位置上 --&gt;<br/>
&nbsp; &nbsp; &nbsp;&lt;view&gt;这里是插入到组件slot中的内容&lt;/view&gt; <br/>
&nbsp; &lt;/my-component&gt;<br/>
&lt;/view&gt;<hr/><span style="color: #ff0000">//index.js</span><br/>
const app = getApp()<br/>
<br/>
Page({<br/>
&nbsp; data: {<br/>
<br/>
&nbsp; },<br/>
&nbsp; myEventListener: function(e) {<br/>
&nbsp; &nbsp; console.log(e)<br/>
&nbsp; }<br/>
})<br/>
<br/>
<br/>
<br/>
</body></html>