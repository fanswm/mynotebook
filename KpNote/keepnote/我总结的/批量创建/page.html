<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>批量创建</title>
</head><body><span style="background-color: #fffffe"><span style="font-family: Consolas"><span style="font-size: 12pt"><span style="color: #0000ff"><span style="color: #000000">&lt;</span></span><span style="color: #000000"><span style="color: #800000">button</span>&nbsp;<span style="color: #ff0000">wx:for</span>=<span style="color: #0000ff">"{{</span></span><span style="color: #ff0000">objectArray</span><span style="color: #0000ff"><span style="color: #000000">}}"</span></span><span style="color: #000000">&nbsp;<span style="color: #ff0000">wx:key</span>=<span style="color: #0000ff">"</span></span><span style="color: #ff0000">unique</span><span style="color: #0000ff"><span style="color: #000000">"</span></span><span style="color: #000000">&nbsp;<span style="color: #ff0000">style</span>=<span style="color: #0000ff">"display: </span></span><span style="color: #ff0000">block</span><span style="color: #0000ff"><span style="color: #000000">;"&gt;</span></span><span style="color: #000000">&nbsp;{{item.id}} <span style="color: #0000ff">&lt;/</span><span style="color: #800000">button</span><span style="color: #0000ff">&gt;<br/>
</span></span><span style="color: #000000"><span style="color: #0000ff">&lt;</span><span style="color: #800000">button</span>&nbsp;<span style="color: #ff0000">bindtap</span>=<span style="color: #0000ff">"</span></span><span style="color: #ff0000">switch</span><span style="color: #0000ff"><span style="color: #000000">"&gt;</span></span><span style="color: #000000">&nbsp;Switch <span style="color: #0000ff">&lt;/</span><span style="color: #800000">button</span><span style="color: #0000ff">&gt;<br/>
</span></span><span style="color: #000000"><span style="color: #0000ff">&lt;</span><span style="color: #800000">button</span>&nbsp;<span style="color: #ff0000">bindtap</span>=<span style="color: #0000ff">"</span></span><span style="color: #ff0000">addToFront</span><span style="color: #0000ff"><span style="color: #000000">"&gt;</span></span><span style="color: #000000">&nbsp;Add to the front <span style="color: #0000ff">&lt;/</span><span style="color: #800000">button</span><span style="color: #0000ff">&gt;</span><br/>
</span><span style="color: #000000"><span style="color: #0000ff">&lt;</span><span style="color: #800000">switch</span>&nbsp;<span style="color: #ff0000">wx:for</span>=<span style="color: #0000ff">"{{</span></span><span style="color: #ff0000">numberArray</span><span style="color: #0000ff"><span style="color: #000000">}}"</span></span><span style="color: #000000">&nbsp;<span style="color: #ff0000">wx:key</span>=<span style="color: #0000ff">"*this"</span>&nbsp;<span style="color: #ff0000">style</span>=<span style="color: #0000ff">"display: block;"&gt;</span>&nbsp;{{item}} <span style="color: #0000ff">&lt;/</span><span style="color: #800000">switch</span><span style="color: #0000ff">&gt;<br/>
</span></span><span style="color: #000000"><span style="color: #0000ff"><br/>
</span></span></span></span></span><span style="background-color: #fffffe"><span style="font-family: Consolas"><span style="font-size: 12pt"><span style="color: #000000"><span style="color: #0000ff">&lt;</span><span style="color: #800000">button</span>&nbsp;<span style="color: #ff0000">bindtap</span>=<span style="color: #0000ff">"</span></span><span style="color: #ff0000">addNumberToFront</span><span style="color: #0000ff"><span style="color: #000000">"&gt;</span></span><span style="color: #000000">&nbsp;Add to the front <span style="color: #0000ff">&lt;/</span><span style="color: #800000">button</span><span style="color: #0000ff">&gt;</span></span></span></span></span>&nbsp; <br/>
<br/>
<br/>
Page({<br/>
&nbsp; data: {<br/>
&nbsp; &nbsp; <span style="color: #ff0000">objectArray</span>: [<br/>
&nbsp; &nbsp; &nbsp; { id: 5, unique: 'unique_5' },<br/>
&nbsp; &nbsp; &nbsp; { id: 4, unique: 'unique_4' },<br/>
&nbsp; &nbsp; &nbsp; { id: 3, unique: 'unique_3' },<br/>
&nbsp; &nbsp; &nbsp; { id: 2, unique: 'unique_2' },<br/>
&nbsp; &nbsp; &nbsp; { id: 1, unique: 'unique_1' },<br/>
&nbsp; &nbsp; &nbsp; { id: 0, unique: 'unique_0' },<br/>
&nbsp; &nbsp; ],<br/>
&nbsp; &nbsp; numberArray: [1, 2, 3, 4]<br/>
&nbsp; },<br/>
&nbsp; <span style="color: #ff0000">button</span>: function (e) {<br/>
&nbsp; &nbsp; const length = this.<span style="color: #ff0000">data</span>.<span style="color: #ff0000">objectArray</span>.length<br/>
&nbsp; &nbsp; for (let i = 0; i &lt; length; ++i) {<br/>
&nbsp; &nbsp; &nbsp; const x = Math.floor(Math.random() * length)<br/>
&nbsp; &nbsp; &nbsp; const y = Math.floor(Math.random() * length)<br/>
<br/>
&nbsp; &nbsp; &nbsp; const temp = this.data.objectArray[x]<br/>
&nbsp; &nbsp; &nbsp; this.data.objectArray[x] = this.data.objectArray[y]<br/>
&nbsp; &nbsp; &nbsp; this.data.objectArray[y] = temp<br/>
&nbsp; &nbsp; }<br/>
&nbsp; &nbsp; this.setData({<br/>
&nbsp; &nbsp; &nbsp; objectArray: this.data.objectArray<br/>
&nbsp; &nbsp; })<br/>
&nbsp; },<br/>
&nbsp; addToFront: function (e) {<br/>
&nbsp; &nbsp; const length = this.data.objectArray.length<br/>
&nbsp; &nbsp; this.data.objectArray = [{ id: length, unique: 'unique_' + length }].concat(this.data.objectArray)<br/>
&nbsp; &nbsp; this.setData({<br/>
&nbsp; &nbsp; &nbsp; objectArray: this.data.objectArray<br/>
&nbsp; &nbsp; })<br/>
&nbsp; },<br/>
&nbsp; addNumberToFront: function (e) {<br/>
&nbsp; &nbsp; this.data.numberArray = [this.data.numberArray.length + 1].concat(this.data.numberArray)<br/>
&nbsp; &nbsp; this.setData({<br/>
&nbsp; &nbsp; &nbsp; numberArray: this.data.numberArray<br/>
&nbsp; &nbsp; })<br/>
&nbsp; }<br/>
})</body></html>