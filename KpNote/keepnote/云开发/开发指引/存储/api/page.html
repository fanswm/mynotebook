<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>API</title>
</head><body>API 指引<br/>
<br/>
<span style="color: #ff0000">上传文件</span><br/>
在小程序端可调用 wx.cloud.<span style="color: #ff0000">uploadFile</span>&nbsp;方法进行上传：<br/>
<br/>
wx.cloud.uploadFile({<br/>
&nbsp; cloudPath: 'example.png', // 上传至云端的路径<br/>
&nbsp; filePath: '', // 小程序临时文件路径<br/>
&nbsp; success: res =&gt; {<br/>
&nbsp; &nbsp; // 返回文件 ID<br/>
&nbsp; &nbsp; console.log(res.fileID)<br/>
&nbsp; },<br/>
&nbsp; fail: console.error<br/>
})<br/>
<br/>
上传成功后会获得<span style="color: #ff0000">文件唯一标识符，即文件 ID，后续操作都基于文件 ID 而不是 URL。</span><br/>
<br/>
<span style="color: #ff0000">下载文件</span><br/>
可以根据文件 ID 下载文件，用户仅可下载其有访问权限的文件：<br/>
<br/>
wx.cloud.downloadFile({<br/>
&nbsp; fileID: '', // 文件 ID<br/>
&nbsp; success: res =&gt; {<br/>
&nbsp; &nbsp; // 返回临时文件路径<br/>
&nbsp; &nbsp; console.log(res.<span style="color: #ff0000">tempFilePath</span>)<br/>
&nbsp; },<br/>
&nbsp; fail: console.error<br/>
})<br/>
<br/>
<span style="color: #ff0000">删除文件</span><br/>
<br/>
可以通过 wx.cloud.<span style="color: #ff0000">deleteFile</span>&nbsp;删除文件：<br/>
<br/>
wx.cloud.deleteFile({<br/>
&nbsp; fileList: ['a7xzcb'],<br/>
&nbsp; success: res =&gt; {<br/>
&nbsp; &nbsp; // handle success<br/>
&nbsp; &nbsp; console.log(res.fileList)<br/>
&nbsp; },<br/>
&nbsp; fail: console.error<br/>
})<br/>
<br/>
更详细的 API 可参考小程序端及后端存储 API 文件。<br/>
<br/>
<span style="color: #ff0000">组件支持</span><br/>
支持在<span style="color: #ff0000">&nbsp;image、audio </span>等组件中传入云文件 ID<br/>
<br/>
<span style="color: #ff0000">换取临时链接</span><br/>
可以根据文件 ID <span style="color: #ff0000">换取临时文件网络链接</span>，文件链接有<span style="color: #ff0000">有效期为两个小时：</span><br/>
<br/>
wx.cloud.getTempFileURL({<br/>
&nbsp; fileList: ['cloud://xxx.png'],<br/>
&nbsp; success: res =&gt; {<br/>
&nbsp; &nbsp; // fileList 是一个有如下结构的对象数组<br/>
&nbsp; &nbsp; // [{<br/>
&nbsp; &nbsp; // &nbsp; &nbsp;fileID: 'cloud://xxx.png', // 文件 ID<br/>
&nbsp; &nbsp; // &nbsp; &nbsp;tempFileURL: '', // 临时文件网络链接<br/>
&nbsp; &nbsp; // &nbsp; &nbsp;maxAge: 120 * 60 * 1000, // 有效期<br/>
&nbsp; &nbsp; // }]<br/>
&nbsp; &nbsp; console.log(res.fileList)<br/>
&nbsp; },<br/>
&nbsp; fail: console.error<br/>
})<br/>
<br/>
<span style="color: #ff0000">API 文档</span><br/>
可以在此参考详细的API 文档：<br/>
<br/>
uploadFile<br/>
downloadFile<br/>
deleteFile<br/>
getTempFileURL</body></html>